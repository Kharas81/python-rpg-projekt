# Protokoll der Design-Entscheidungen

* **[2025-05-04]:** Initiales Projekt-Setup: Definition einer Standard-Ordnerstruktur (`src`, `docs`, `tests`, `data`, `reports`, `scripts`, `tools`) und Konfiguration von `.gitignore` zur Versionskontrolle mit Git und GitHub (Repo: `python-rpg-projekt`).
* **[2025-05-04]:** Datenhaltung: Statische Spieldaten und Konfigurationen (Attribute, Stats, Skills, Gegner, Klassen etc.) werden bevorzugt in separaten, gut strukturierten JSON-Dateien im Verzeichnis `src/definitions/json_data/` abgelegt, um Wartbarkeit und Übersichtlichkeit zu gewährleisten. Kommentare sind in diesen JSON-Dateien nicht erlaubt.
* **[2025-05-04]:** Definitionen - Primärattribute: Die Kernattribute (STR, DEX, INT, CON, WIS) werden in `src/definitions/json_data/primary_attributes.json` mit Name und Beschreibung definiert. Rüstung und Magieresistenz werden als abgeleitete Kampfwerte behandelt, nicht als primäre Attribute.
* **[2025-05-04]:** Definitionen - Kampfwerte: Abgeleitete Kampfwerte und Ressourcen (HP, MANA, STAMINA, ENERGY, ARMOR, MAGIC_RESIST, HIT_CHANCE, EVASION, ACCURACY, INITIATIVE) werden in `src/definitions/json_data/combat_stats.json` mit Name und Beschreibung definiert. Die genauen Berechnungsformeln (z.B. wie HP aus CON berechnet wird) sind Teil der Spiellogik, nicht dieser Basisdefinitionen.
* **[2025-05-04]:** Definitionen - Skills: Fähigkeiten (`skills.json`) werden detailliert mit ID, Name, Beschreibung, Kosten (Ressource, Menge), Zieltyp (`ENEMY_SINGLE`, `SELF`, `ALLY_SINGLE`, `AREA_ENEMY`), Effekten (als Liste, z.B. DAMAGE, HEAL, APPLY_STATUS, ABSORB_SHIELD) und optionalen Tags definiert. Schadens-/Heilungsformeln werden durch Felder wie `base_value` (kann `"WEAPON"` sein), `scaling_attribute`, `multiplier`, `scaling_factor` etc. repräsentiert; die Logik zur Berechnung liegt im Code.
* **[2025-05-04]:** Definitionen - Gegner: Gegnertypen (`enemies.json`) werden mit ID, Name, Level, Tags, Basis-Attributen, Basis-Kampfwerten (inkl. HP, Rüstung, Resistenzen, Ressourcen), einer Liste bekannter Skill-IDs und dem XP-Belohnungswert definiert. Gegner-HP wird vorerst nach der Spieler-Formel (50 + CON*5) berechnet.
* **[2025-05-04]:** Definitionen - Klassen: Spielbare Charakterklassen (`classes.json`) werden mit ID, Name, Beschreibung, Start-Attributen, Start-Kampfwerten (Rüstung, Resistenzen, max. Ressourcen), der primären Ressource, einer Liste von Start-Skill-IDs und Schlüsselattributen definiert.
* **[2025-05-04]:** Datenmodelle & Laden - Python-Struktur: Zur Repräsentation der geladenen JSON-Daten im Speicher werden Python `dataclasses` verwendet (`src/definitions/models.py`). Diese Modelle sind "frozen" (unveränderlich nach Erstellung). Eine Hilfsfunktion (`dict_to_dataclass`) konvertiert die Dictionaries aus den JSONs in diese Typ-sicheren Objekte.
* **[2025-05-04]:** Datenmodelle & Laden - Lade-Logik: Ein zentrales Modul `src/definitions/loader.py` ist für das Laden verantwortlich. Die Funktion `load_definitions()` liest alle JSON-Dateien aus `src/definitions/json_data/`, parst sie mithilfe der Datenmodelle und speichert die resultierenden Objekte in global zugänglichen Dictionaries (`loader.ATTRIBUTES`, `loader.SKILLS` etc.). Saubere Zugriffsfunktionen (`loader.get_skill()`, etc.) werden ebenfalls bereitgestellt. Das Laden erfolgt einmalig beim Start des Spiels. Korrekte Reihenfolge der Feld-/Klassen-Definitionen und Verwendung von `dataclasses.MISSING` wurde sichergestellt.
* **[2025-05-04]:** Hauptprogramm & Betriebsmodi: Das Skript `src/main.py` dient als Haupteinstiegspunkt. Es importiert und ruft `loader.load_definitions()` auf. Mittels `argparse` wird zwischen den obligatorischen Betriebsmodi `--mode manual` (für interaktives Spiel) und `--mode auto` (für automatisierte Abläufe wie KI-Training) unterschieden und die entsprechende Logik gestartet.